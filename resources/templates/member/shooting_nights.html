{% extends "base.html" %}
{% block title %}Shooting Nights - South East Archers{% endblock %}
{% block content %}
<h1 class="text-4xl font-bold mb-6">Available Shooting Nights</h1>

{% if nights %}
    <div class="space-y-4">
    {% for night in nights %}
        <div class="bg-white p-6 rounded shadow">
            <div class="flex justify-between items-start">
                <div>
                    <h3 class="text-2xl font-bold">{{ night.location }}</h3>
                    <p class="text-gray-600">{{ night.date.strftime('%Y-%m-%d %H:%M') }}</p>
                    {% if night.description %}<p class="text-gray-700">{{ night.description }}</p>{% endif %}
                    <p class="text-gray-600">Spots: {{ night.spots_remaining() }}/{{ night.capacity }}</p>
                </div>
                <div>
                    {% if night.id in user_night_ids %}
                        <button class="bg-green-600 text-white px-4 py-2 rounded cursor-not-allowed" disabled>
                            Registered
                        </button>
                    {% elif night.is_full() %}
                        <button class="bg-gray-400 text-white px-4 py-2 rounded cursor-not-allowed" disabled>
                            Full
                        </button>
                    {% else %}
                        <form method="POST" action="/member/shooting-nights/{{ night.id }}/register" style="display:inline;">
                            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                Register
                            </button>
                        </form>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
{% else %}
    <p class="text-gray-700">No shooting nights available.</p>
{% endif %}
{% endblock %}
